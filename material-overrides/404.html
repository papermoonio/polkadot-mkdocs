{% extends "main.html" %}

{#
  This block sets the page title. 
  It combines your custom title with the site name.
#}
{% block title %}
  404 - Page Not Found | {{ config.site_name }}
{% endblock %}


{#
  This block injects your custom CSS.
  `{{ super() }}` is essential to load the theme's default styles first.
#}
{% block styles %}
  {{ super() }}
  <style>
    /* Reset and base styles */
    .md-main .md-content {
      padding: 0;
    }

    .md-content__inner {
      margin: 0;
    }
    
    .page-404-container {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #ffffff;
      color: #1a1a1a;
      line-height: 1.6;
      overflow-x: hidden;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      padding: 2rem;
    }

    .page-404-content {
      text-align: center;
      max-width: 600px;
      z-index: 10;
      position: relative;
    }

    /* Polkadot logo and dot animations */
    .polkadot-logo {
      width: 120px;
      height: 120px;
      margin: 0 auto 3rem;
      position: relative;
      animation: logoEvolution 20s ease-in-out infinite;
    }

    .dot {
      position: absolute;
      width: 32px;
      height: 16px;
      background: #E6007A;
      border-radius: 50%;
      opacity: 0.9;
      transition: all 1.5s cubic-bezier(0.4, 0, 0.2, 1);
      transform-origin: center;
    }

    .dot:nth-child(1) { top: 0; left: 50%; transform: translateX(-50%); animation: dotEvolution1 24s ease-in-out infinite; }
    .dot:nth-child(2) { top: 20%; right: 20%; transform: rotate(60deg); animation: dotEvolution2 24s ease-in-out infinite; }
    .dot:nth-child(3) { bottom: 20%; right: 20%; transform: rotate(120deg); animation: dotEvolution3 24s ease-in-out infinite; }
    .dot:nth-child(4) { bottom: 0; left: 50%; transform: translateX(-50%) rotate(180deg); animation: dotEvolution4 24s ease-in-out infinite; }
    .dot:nth-child(5) { bottom: 20%; left: 20%; transform: rotate(240deg); animation: dotEvolution5 24s ease-in-out infinite; }
    .dot:nth-child(6) { top: 20%; left: 20%; transform: rotate(300deg); animation: dotEvolution6 24s ease-in-out infinite; }

    /* Keyframes for animations */
    @keyframes logoEvolution {
      0%, 100% { transform: translateY(0px) rotate(0deg) scale(1); filter: hue-rotate(0deg); }
      25% { transform: translateY(-10px) rotate(90deg) scale(1.1); filter: hue-rotate(45deg); }
      50% { transform: translateY(0px) rotate(180deg) scale(0.9); filter: hue-rotate(90deg); }
      75% { transform: translateY(-5px) rotate(270deg) scale(1.05); filter: hue-rotate(135deg); }
    }
    @keyframes dotEvolution1{0%{transform:translateX(-50%) scale(1) rotate(0deg);opacity:.9;background:#e6007a}12.5%{transform:translateX(-50%) translateY(-20px) scale(1.3) rotate(45deg);opacity:1;background:#ff1493}25%{transform:translateX(-30px) translateY(-30px) scale(.8) rotate(90deg);opacity:.7;background:#ff6b9d}37.5%{transform:translateX(20px) translateY(-10px) scale(1.5) rotate(135deg);opacity:1;background:#e6007a}50%{transform:translateX(0) translateY(20px) scale(1) rotate(180deg);opacity:.8;background:#cc0066}62.5%{transform:translateX(-40px) translateY(10px) scale(1.2) rotate(225deg);opacity:1;background:#ff1493}75%{transform:translateX(30px) translateY(-25px) scale(.9) rotate(270deg);opacity:.9;background:#e6007a}87.5%{transform:translateX(-10px) translateY(5px) scale(1.1) rotate(315deg);opacity:.8;background:#ff6b9d}100%{transform:translateX(-50%) scale(1) rotate(360deg);opacity:.9;background:#e6007a}}
    @keyframes dotEvolution2{0%{transform:rotate(60deg) scale(1);opacity:.9;background:#e6007a}16.67%{transform:rotate(120deg) scale(1.4) translateY(-15px);opacity:1;background:#ff1493}33.33%{transform:rotate(240deg) scale(.7) translateX(25px);opacity:.6;background:#cc0066}50%{transform:rotate(300deg) scale(1.6) translateY(20px);opacity:1;background:#ff6b9d}66.67%{transform:rotate(480deg) scale(.9) translateX(-30px);opacity:.8;background:#e6007a}83.33%{transform:rotate(540deg) scale(1.2) translateY(-10px);opacity:1;background:#ff1493}100%{transform:rotate(600deg) scale(1);opacity:.9;background:#e6007a}}
    @keyframes dotEvolution3{0%{transform:rotate(120deg) scale(1);opacity:.9;background:#e6007a}20%{transform:rotate(180deg) scale(.6) translateX(-35px);opacity:.7;background:#cc0066}40%{transform:rotate(300deg) scale(1.5) translateY(-25px);opacity:1;background:#ff1493}60%{transform:rotate(420deg) scale(1.1) translateX(20px);opacity:.9;background:#ff6b9d}80%{transform:rotate(540deg) scale(.8) translateY(15px);opacity:.8;background:#e6007a}100%{transform:rotate(600deg) scale(1);opacity:.9;background:#e6007a}}
    @keyframes dotEvolution4{0%{transform:translateX(-50%) rotate(180deg) scale(1);opacity:.9;background:#e6007a}14.29%{transform:translateX(-20px) rotate(240deg) scale(1.3) translateY(-20px);opacity:1;background:#ff6b9d}28.57%{transform:translateX(40px) rotate(360deg) scale(.7) translateY(10px);opacity:.6;background:#cc0066}42.86%{transform:translateX(-60px) rotate(480deg) scale(1.4) translateY(-15px);opacity:1;background:#ff1493}57.14%{transform:translateX(10px) rotate(540deg) scale(1) translateY(25px);opacity:.8;background:#e6007a}71.43%{transform:translateX(-30px) rotate(660deg) scale(1.2) translateY(-5px);opacity:1;background:#ff6b9d}85.71%{transform:translateX(50px) rotate(720deg) scale(.9) translateY(12px);opacity:.9;background:#cc0066}100%{transform:translateX(-50%) rotate(720deg) scale(1);opacity:.9;background:#e6007a}}
    @keyframes dotEvolution5{0%{transform:rotate(240deg) scale(1);opacity:.9;background:#e6007a}18.18%{transform:rotate(300deg) scale(1.5) translateX(30px);opacity:1;background:#ff1493}36.36%{transform:rotate(480deg) scale(.8) translateY(-20px);opacity:.7;background:#ff6b9d}54.55%{transform:rotate(600deg) scale(1.3) translateX(-25px);opacity:1;background:#cc0066}72.73%{transform:rotate(720deg) scale(.9) translateY(18px);opacity:.8;background:#e6007a}90.91%{transform:rotate(840deg) scale(1.1) translateX(15px);opacity:1;background:#ff1493}100%{transform:rotate(960deg) scale(1);opacity:.9;background:#e6007a}}
    @keyframes dotEvolution6{0%{transform:rotate(300deg) scale(1);opacity:.9;background:#e6007a}22.22%{transform:rotate(420deg) scale(.6) translateY(30px);opacity:.6;background:#cc0066}44.44%{transform:rotate(600deg) scale(1.6) translateX(-40px);opacity:1;background:#ff6b9d}66.67%{transform:rotate(780deg) scale(1.1) translateY(-22px);opacity:.9;background:#ff1493}88.89%{transform:rotate(900deg) scale(.85) translateX(35px);opacity:.8;background:#e6007a}100%{transform:rotate(1020deg) scale(1);opacity:.9;background:#e6007a}}

    /* Error text styles */
    .error-code { font-size: clamp(4rem, 10vw, 6rem); font-weight: 800; color: #E6007A; margin-bottom: 1.5rem; letter-spacing: -0.02em; animation: slideInUp 0.8s ease-out; }
    .error-title { font-size: clamp(1.5rem, 4vw, 2.5rem); font-weight: 700; color: #1a1a1a; margin-bottom: 1rem; animation: slideInUp 0.8s ease-out 0.2s both; }
    .error-description { 
      font-size: 1.125rem; 
      color: #666666; 
      margin-bottom: 2rem; 
      line-height: 1.7; 
      font-weight: 400; 
      animation: slideInUp 0.8s ease-out 0.4s both; 
      position: relative;
    }

    /* Dissolving text effect - permanent degradation */
    .dissolving-text {
      position: relative;
      display: inline-block;
      animation: textDissolve 12s ease-out forwards;
    }

    .dissolving-text::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: repeating-linear-gradient(
        45deg,
        transparent,
        transparent 2px,
        rgba(255, 255, 255, 0.1) 2px,
        rgba(255, 255, 255, 0.1) 4px
      );
      animation: dissolveMask 12s ease-out forwards;
      pointer-events: none;
    }

    .dissolving-text .char {
      display: inline-block;
      position: relative;
      transition: all 0.3s ease;
    }

    @keyframes textDissolve {
      0% { 
        opacity: 1; 
        filter: blur(0px) brightness(1);
        text-shadow: 0 0 0 rgba(230, 0, 122, 0);
      }
      15% { 
        opacity: 0.95; 
        filter: blur(0.1px) brightness(0.98);
        text-shadow: 0 0 1px rgba(230, 0, 122, 0.05);
      }
      30% { 
        opacity: 0.8; 
        filter: blur(0.3px) brightness(0.92);
        text-shadow: 0 0 3px rgba(230, 0, 122, 0.15);
      }
      45% { 
        opacity: 0.6; 
        filter: blur(0.7px) brightness(0.85);
        text-shadow: 0 0 5px rgba(230, 0, 122, 0.25);
      }
      60% { 
        opacity: 0.4; 
        filter: blur(1.2px) brightness(0.75);
        text-shadow: 0 0 8px rgba(230, 0, 122, 0.35);
      }
      75% { 
        opacity: 0.25; 
        filter: blur(2px) brightness(0.6);
        text-shadow: 0 0 12px rgba(230, 0, 122, 0.45);
      }
      90% { 
        opacity: 0.1; 
        filter: blur(3px) brightness(0.4);
        text-shadow: 0 0 16px rgba(230, 0, 122, 0.5);
      }
      100% { 
        opacity: 0.05; 
        filter: blur(4px) brightness(0.2);
        text-shadow: 0 0 20px rgba(230, 0, 122, 0.6);
      }
    }

    @keyframes dissolveMask {
      0% { 
        transform: translateX(-100%) rotate(0deg);
        opacity: 0;
      }
      20% { 
        transform: translateX(-20%) rotate(20deg);
        opacity: 0.2;
      }
      40% { 
        transform: translateX(20%) rotate(40deg);
        opacity: 0.4;
      }
      60% { 
        transform: translateX(60%) rotate(60deg);
        opacity: 0.6;
      }
      80% { 
        transform: translateX(120%) rotate(80deg);
        opacity: 0.4;
      }
      100% { 
        transform: translateX(200%) rotate(100deg);
        opacity: 0;
      }
    }

    @keyframes slideInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

    /* Background decorations */
    .background-decoration { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; overflow: hidden; }
    
    .bg-circle {
      position: absolute;
      border-radius: 50%;
      background: linear-gradient(135deg, rgba(230, 0, 122, 0.03), rgba(230, 0, 122, 0.08));
      animation: evolvingCircle 30s ease-in-out infinite;
    }
    .bg-circle:nth-child(1) { width: 300px; height: 300px; top: 10%; left: -10%; animation-delay: 0s; }
    .bg-circle:nth-child(2) { width: 200px; height: 200px; top: 60%; right: -5%; animation-delay: -10s; }
    .bg-circle:nth-child(3) { width: 150px; height: 150px; bottom: 20%; left: 20%; animation-delay: -20s; }

    .morphing-particle {
      position: absolute; width: 4px; height: 4px; background: rgba(230, 0, 122, 0.6);
      border-radius: 50%; animation: particleEvolution 15s linear infinite;
    }
    .morphing-particle:nth-child(4) { top: 20%; left: 10%; animation-delay: 0s; }
    .morphing-particle:nth-child(5) { top: 40%; right: 15%; animation-delay: -3s; }
    .morphing-particle:nth-child(6) { bottom: 30%; left: 30%; animation-delay: -6s; }
    .morphing-particle:nth-child(7) { top: 70%; right: 25%; animation-delay: -9s; }
    .morphing-particle:nth-child(8) { bottom: 15%; right: 40%; animation-delay: -12s; }
    
    @keyframes particleEvolution{0%{transform:translateX(0) translateY(0) scale(1);opacity:.6;background:rgba(230,0,122,.6)}20%{transform:translateX(50px) translateY(-30px) scale(1.5);opacity:1;background:rgba(255,20,147,.8)}40%{transform:translateX(-30px) translateY(40px) scale(.5);opacity:.4;background:rgba(204,0,102,.5)}60%{transform:translateX(70px) translateY(20px) scale(2);opacity:.9;background:rgba(255,107,157,.7)}80%{transform:translateX(-50px) translateY(-50px) scale(.8);opacity:.7;background:rgba(230,0,122,.6)}100%{transform:translateX(0) translateY(0) scale(1);opacity:.6;background:rgba(230,0,122,.6)}}
    @keyframes evolvingCircle{0%{transform:translateX(0) translateY(0) rotate(0deg) scale(1);background:linear-gradient(135deg,rgba(230,0,122,.03),rgba(230,0,122,.08));border-radius:50%}12.5%{transform:translateX(50px) translateY(-30px) rotate(45deg) scale(1.2);background:linear-gradient(135deg,rgba(255,20,147,.04),rgba(255,107,157,.09));border-radius:30% 70% 50% 80%}25%{transform:translateX(100px) translateY(-10px) rotate(90deg) scale(.8);background:linear-gradient(135deg,rgba(204,0,102,.05),rgba(230,0,122,.1));border-radius:20% 80% 60% 40%}37.5%{transform:translateX(70px) translateY(40px) rotate(135deg) scale(1.5);background:linear-gradient(135deg,rgba(255,107,157,.03),rgba(255,20,147,.07));border-radius:70% 30% 40% 60%}50%{transform:translateX(0) translateY(60px) rotate(180deg) scale(1.1);background:linear-gradient(135deg,rgba(230,0,122,.06),rgba(204,0,102,.08));border-radius:50% 50% 20% 80%}62.5%{transform:translateX(-60px) translateY(30px) rotate(225deg) scale(.9);background:linear-gradient(135deg,rgba(255,20,147,.04),rgba(230,0,122,.09));border-radius:40% 60% 70% 30%}75%{transform:translateX(-40px) translateY(-20px) rotate(270deg) scale(1.3);background:linear-gradient(135deg,rgba(204,0,102,.03),rgba(255,107,157,.08));border-radius:80% 20% 50% 50%}87.5%{transform:translateX(-10px) translateY(-50px) rotate(315deg) scale(1);background:linear-gradient(135deg,rgba(255,107,157,.05),rgba(230,0,122,.07));border-radius:60% 40% 80% 20%}100%{transform:translateX(0) translateY(0) rotate(360deg) scale(1);background:linear-gradient(135deg,rgba(230,0,122,.03),rgba(230,0,122,.08));border-radius:50%}}

    /* Media queries and accessibility */
    @media (max-width: 768px) {
      .page-404-container { padding: 1rem; }
      .polkadot-logo { width: 100px; height: 100px; }
      .dot { width: 26px; height: 13px; }
    }
    @media (prefers-reduced-motion: reduce) {
      .polkadot-logo, .dot, .bg-circle, .error-code, .error-title, .error-description, 
      .dissolving-text, .dissolving-text::before {
        animation: none; opacity: 1; transform: none;
      }
    }
    .polkadot-logo:focus { outline: 2px solid #E6007A; outline-offset: 2px; }
  </style>
{% endblock %}


{#
  This block replaces the theme's main content area with your HTML.
  Note that this will appear within the site's overall layout (header, nav, etc.).
#}
{% block content %}
  <div class="page-404-container">
    <div class="background-decoration">
        <div class="bg-circle"></div>
        <div class="bg-circle"></div>
        <div class="bg-circle"></div>
        <div class="morphing-particle"></div>
        <div class="morphing-particle"></div>
        <div class="morphing-particle"></div>
        <div class="morphing-particle"></div>
        <div class="morphing-particle"></div>
    </div>
    
    <div class="page-404-content">
        <div class="polkadot-logo">
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
        </div>
        
        <div class="error-code">404</div>
        <h1 class="error-title">Page Not Found</h1>
        <p class="error-description">
            <span class="dissolving-text">The page you're looking for doesn't exist or has been moved.</span>
            <a href="{{ config.site_url }}">Return to the Polkadot Docs</a>.
        </p>
    </div>
  </div>
{% endblock %}

{% block site_nav %}
{% endblock %}

{#
  This block injects your custom JavaScript.
  `{{ super() }}` is essential to load the theme's default scripts first.
#}
{% block scripts %}
  {{ super() }}
  <script>
    // Dynamic color evolution for dots
    const dots = document.querySelectorAll('.dot');
    const colors = ['#E6007A', '#ff1493', '#ff6b9d', '#cc0066', '#e6007a', '#ff4081'];
    
    function evolveDotColors() {
        dots.forEach((dot, index) => {
            const colorIndex = (Date.now() / (1000 + index * 200)) % colors.length;
            const color1 = colors[Math.floor(colorIndex)];
            const progress = colorIndex - Math.floor(colorIndex);
            
            dot.style.background = color1;
            dot.style.filter = `hue-rotate(${progress * 60}deg) brightness(${1 + progress * 0.3})`;
        });
    }

    // Enhanced dissolving text effect
    function initializeDissolvingText() {
        const dissolvingText = document.querySelector('.dissolving-text');
        if (!dissolvingText || window.matchMedia("(prefers-reduced-motion: reduce)").matches) return;
        
        const text = dissolvingText.textContent;
        dissolvingText.innerHTML = '';
        
        // Wrap each character in a span for individual animation
        text.split('').forEach((char, index) => {
            const span = document.createElement('span');
            span.className = 'char';
            span.textContent = char === ' ' ? '\u00A0' : char; // Non-breaking space
            span.style.animationDelay = `${index * 0.15}s`;
            span.style.animation = `charDissolve 12s ease-out forwards`;
            dissolvingText.appendChild(span);
        });
    }

    // Individual character dissolve animation - permanent degradation
    const style = document.createElement('style');
    style.textContent = `
        @keyframes charDissolve {
            0% { 
                opacity: 1; 
                transform: translateY(0) scale(1) rotate(0deg);
                filter: blur(0px);
            }
            10% { 
                opacity: 0.95; 
                transform: translateY(-1px) scale(0.99) rotate(0.5deg);
                filter: blur(0.1px);
            }
            25% { 
                opacity: 0.85; 
                transform: translateY(-2px) scale(0.97) rotate(1deg);
                filter: blur(0.3px);
            }
            40% { 
                opacity: 0.7; 
                transform: translateY(1px) scale(0.94) rotate(-1deg);
                filter: blur(0.6px);
            }
            55% { 
                opacity: 0.5; 
                transform: translateY(3px) scale(0.9) rotate(2deg);
                filter: blur(1px);
            }
            70% { 
                opacity: 0.3; 
                transform: translateY(5px) scale(0.85) rotate(-2deg);
                filter: blur(1.5px);
            }
            85% { 
                opacity: 0.15; 
                transform: translateY(8px) scale(0.75) rotate(3deg);
                filter: blur(2.5px);
            }
            100% { 
                opacity: 0.05; 
                transform: translateY(12px) scale(0.6) rotate(-4deg);
                filter: blur(4px);
            }
        }
    `;
    document.head.appendChild(style);

    // Evolving mouse interaction
    let mouseEvolution = 0;
    document.addEventListener('mousemove', (e) => {
        if (window.matchMedia("(prefers-reduced-motion: reduce)").matches) return;
        mouseEvolution += 0.01;
        const logo = document.querySelector('.polkadot-logo');
        if (!logo) return;
        const rect = logo.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        
        const deltaX = (e.clientX - centerX) * (0.02 + Math.sin(mouseEvolution) * 0.01);
        const deltaY = (e.clientY - centerY) * (0.02 + Math.cos(mouseEvolution) * 0.01);
        const rotation = Math.sin(mouseEvolution * 0.5) * 5;
        
        logo.style.transform = `translate(${deltaX}px, ${deltaY}px) rotate(${rotation}deg)`;
        
        dots.forEach((dot, index) => {
            const phase = mouseEvolution + index * 0.5;
            const intensity = 1 + Math.sin(phase) * 0.3;
            const scale = 1 + Math.cos(phase) * 0.1;
            dot.style.filter += ` scale(${scale}) brightness(${intensity})`;
        });

        // Interactive dissolving effect on hover
        const dissolvingText = document.querySelector('.dissolving-text');
        if (dissolvingText) {
            const textRect = dissolvingText.getBoundingClientRect();
            const distance = Math.sqrt(
                Math.pow(e.clientX - (textRect.left + textRect.width / 2), 2) +
                Math.pow(e.clientY - (textRect.top + textRect.height / 2), 2)
            );
            const maxDistance = 200;
            const intensity = Math.max(0, 1 - distance / maxDistance);
            
            dissolvingText.style.filter = `blur(${intensity * 2}px) brightness(${1 - intensity * 0.3})`;
            dissolvingText.style.transform = `scale(${1 - intensity * 0.1})`;
        }
    });

    // Reset on mouse leave with evolution
    document.addEventListener('mouseleave', () => {
        if (window.matchMedia("(prefers-reduced-motion: reduce)").matches) return;
        const logo = document.querySelector('.polkadot-logo');
        const dissolvingText = document.querySelector('.dissolving-text');
        
        if (logo) logo.style.transform = `rotate(${Math.sin(mouseEvolution) * 2}deg)`;
        if (dissolvingText) {
            dissolvingText.style.filter = '';
            dissolvingText.style.transform = '';
        }
    });

    // Continuous evolution effects
    function continuousEvolution() {
        if (window.matchMedia("(prefers-reduced-motion: reduce)").matches) return;
        const time = Date.now() * 0.001;
        
        const particles = document.querySelectorAll('.morphing-particle');
        particles.forEach((particle, index) => {
            const phase = time * 0.3 + index * 0.8;
            const scale = 1 + Math.sin(phase) * 0.5;
            const opacity = 0.3 + Math.cos(phase * 1.3) * 0.4;
            const hue = Math.sin(phase * 0.7) * 60;
            
            particle.style.transform = `scale(${scale})`;
            particle.style.opacity = opacity;
            particle.style.filter = `hue-rotate(${hue}deg)`;
        });
        
        const logo = document.querySelector('.polkadot-logo');
        if (logo && !logo.style.transform.includes('translate')) {
            const containerRotation = Math.sin(time * 0.1) * 2;
            const containerScale = 1 + Math.sin(time * 0.15) * 0.05;
            logo.style.transform = `rotate(${containerRotation}deg) scale(${containerScale})`;
        }
        
        requestAnimationFrame(continuousEvolution);
    }

    // Start evolution cycles
    if (!window.matchMedia("(prefers-reduced-motion: reduce)").matches) {
      setInterval(evolveDotColors, 100);
      continuousEvolution();
      setTimeout(initializeDissolvingText, 1000); // Start dissolving after initial load
    }

    // Keyboard navigation enhancement
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            const logo = document.querySelector('.polkadot-logo');
            if (logo && !window.matchMedia("(prefers-reduced-motion: reduce)").matches) {
              logo.style.transition = 'transform 0.5s ease-out';
              logo.style.transform = 'scale(1.2) rotate(180deg)';
            }
            setTimeout(() => { history.back(); }, 300);
        }
    });
  </script>
{% endblock %}